
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ê½ƒì”ë”” ìƒìœ¡í™˜ê²½ ì‹¤ì‹œê°„ ëŒ€ì‹œë³´ë“œ</title>
  <style>
    body { font-family: 'Segoe UI', sans-serif; background: #f9fbfc; padding: 20px; color: #333; }
    h1 { text-align: center; font-size: 22px; margin-bottom: 10px; }
    .timestamp { text-align: center; font-size: 13px; color: #777; margin-bottom: 30px; }
    .cards { display: flex; flex-wrap: wrap; justify-content: center; gap: 12px; margin-bottom: 30px; }
    .card { width: 160px; background: #fff; border-radius: 14px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); padding: 15px; text-align: center; }
    .card img { width: 32px; }
    .card h3 { font-size: 14px; margin: 5px 0; color: #2b7a5b; }
    .value { font-size: 20px; font-weight: bold; }
    .status { font-size: 12px; margin-top: 6px; display: inline-block; padding: 3px 8px; border-radius: 10px; }
    .ok { background: #e0f6e6; color: #2e8b57; }
    .warn { background: #fff6d6; color: #d18c00; }
    .bad { background: #ffe6e6; color: #cc0000; }
  </style>
</head>
<body>

<h1>ğŸŒ¸ ê½ƒì”ë”” ì‹¤ì‹œê°„ ìƒìœ¡í™˜ê²½ ëŒ€ì‹œë³´ë“œ</h1>
<div class="timestamp" id="timestamp">ë°ì´í„° ìˆ˜ì§‘ ì¤‘...</div>

<div class="cards">
  <div class="card">
    <img src="https://cdn-icons-png.flaticon.com/512/869/869869.png" alt="light">
    <h3>ì¼ì¡°ëŸ‰</h3>
    <div class="value" id="lux">-</div>
    <div class="status" id="luxStatus">-</div>
  </div>
  <div class="card">
    <img src="https://cdn-icons-png.flaticon.com/512/2900/2900481.png" alt="moisture">
    <h3>í† ì–‘ ìˆ˜ë¶„</h3>
    <div class="value" id="moisture">-</div>
    <div class="status" id="moistureStatus">-</div>
  </div>
  <div class="card">
    <img src="https://cdn-icons-png.flaticon.com/512/728/728093.png" alt="soil-temp">
    <h3>í† ì–‘ ì˜¨ë„</h3>
    <div class="value" id="soilTemp">-</div>
    <div class="status" id="soilTempStatus">-</div>
  </div>
  <div class="card">
    <img src="https://cdn-icons-png.flaticon.com/512/869/869869.png" alt="air-temp">
    <h3>ëŒ€ê¸° ì˜¨ë„</h3>
    <div class="value" id="airTemp">-</div>
    <div class="status" id="airTempStatus">-</div>
  </div>
  <div class="card">
    <img src="https://cdn-icons-png.flaticon.com/512/728/728093.png" alt="humidity">
    <h3>ëŒ€ê¸° ìŠµë„</h3>
    <div class="value" id="humidity">-</div>
    <div class="status" id="humidityStatus">-</div>
  </div>
</div>

<script>
async function loadSensorData() {
  try {
    const res = await fetch("https://yourdomain.com/api/sensor/realtime"); // ì‚¬ìš©ì ì„¼ì„œ API ì£¼ì†Œ
    const data = await res.json();

    document.getElementById("lux").innerText = `${data.lux} lux`;
    document.getElementById("luxStatus").innerText = data.lux >= 15000 ? "ì ì •" : "ë¶€ì¡±";
    document.getElementById("luxStatus").className = "status " + (data.lux >= 15000 ? "ok" : "bad");

    document.getElementById("moisture").innerText = `${data.soilMoisture} %`;
    let moistureClass = "ok";
    let moistureText = "ì ì •";
    if (data.soilMoisture < 20) { moistureClass = "bad"; moistureText = "ê±´ì¡°"; }
    else if (data.soilMoisture > 35) { moistureClass = "warn"; moistureText = "ê³¼ìŠµ"; }
    document.getElementById("moistureStatus").innerText = moistureText;
    document.getElementById("moistureStatus").className = "status " + moistureClass;

    document.getElementById("soilTemp").innerText = `${data.soilTemp} â„ƒ`;
    let soilTempClass = (data.soilTemp >= 15 && data.soilTemp <= 25) ? "ok" : "warn";
    document.getElementById("soilTempStatus").innerText = (soilTempClass === "ok" ? "ì ì •" : "ì£¼ì˜");
    document.getElementById("soilTempStatus").className = "status " + soilTempClass;

    document.getElementById("airTemp").innerText = `${data.airTemp} â„ƒ`;
    let airTempClass = (data.airTemp >= 10 && data.airTemp <= 28) ? "ok" : "warn";
    document.getElementById("airTempStatus").innerText = (airTempClass === "ok" ? "ì ì •" : "ì£¼ì˜");
    document.getElementById("airTempStatus").className = "status " + airTempClass;

    document.getElementById("humidity").innerText = `${data.airHumidity} %`;
    let humClass = (data.airHumidity >= 40 && data.airHumidity <= 70) ? "ok" : "warn";
    document.getElementById("humidityStatus").innerText = (humClass === "ok" ? "ì ì •" : "ì£¼ì˜");
    document.getElementById("humidityStatus").className = "status " + humClass;

    const now = new Date();
    document.getElementById("timestamp").innerText = `ë°ì´í„° ìˆ˜ì§‘ ì‹œê°„: ${now.toLocaleString("ko-KR")}`;
  } catch (e) {
    document.getElementById("timestamp").innerText = "âŒ ì„¼ì„œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.";
    console.error("ë°ì´í„° ìˆ˜ì§‘ ì‹¤íŒ¨:", e);
  }
}

loadSensorData();
setInterval(loadSensorData, 30000);
</script>

</body>
</html>
